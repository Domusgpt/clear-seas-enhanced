/*
 * Neoskeuomorphic Holographic Card System
 * Ultra-advanced card tilt/expand animations with depth layers
 * Each card morphs uniquely with complementing VIB34D visualizers
 */

:root {
  /* Card animation variables */
  --bend-intensity: 0;
  --mouse-x: 50%;
  --mouse-y: 50%;
  --card-depth: 0;
  --tilt-strength: 1;
  --card-energy: 0;
  
  /* Neoskeuomorphic depth system */
  --neo-highlight: rgba(255, 255, 255, 0.15);
  --neo-shadow: rgba(0, 0, 0, 0.4);
  --neo-border: rgba(0, 255, 255, 0.3);
  --neo-glow: rgba(0, 255, 255, 0.2);
  
  /* Holographic rim lighting */
  --holo-rim-1: rgba(0, 255, 255, 0.6);
  --holo-rim-2: rgba(255, 0, 255, 0.4);
  --holo-rim-3: rgba(255, 255, 0, 0.3);
}

/* ===== NEOSKEUOMORPHIC CARD BASE ===== */
.tech-card, .portfolio-item, .paper-card {
  position: relative;
  background: rgba(20, 30, 60, 0.3);
  backdrop-filter: blur(20px);
  border-radius: 25px;
  overflow: hidden;
  transform-style: preserve-3d;
  transition: all 0.6s cubic-bezier(0.25, 0.46, 0.45, 0.94);
  cursor: pointer;
  
  /* Neoskeuomorphic shadow system */
  box-shadow: 
    /* Outer shadows for depth */
    0 20px 40px var(--neo-shadow),
    0 8px 16px rgba(0, 0, 0, 0.3),
    /* Inner highlights for glass effect */
    inset 0 1px 2px var(--neo-highlight),
    inset 0 -1px 1px rgba(0, 0, 0, 0.1),
    /* Holographic rim lighting */
    0 0 0 1px var(--neo-border),
    0 0 20px var(--neo-glow);
}

/* ===== CARD HOVER STATES ===== */

/* Wall-breaking tilt effect */
.tech-card:hover, .portfolio-item:hover, .paper-card:hover {
  --card-energy: 1;
  --tilt-strength: 1.5;
  
  transform: 
    perspective(800px)
    rotateY(calc(25deg * var(--bend-intensity) * var(--tilt-strength)))
    rotateX(calc(5deg * (var(--mouse-y) - 50) / 50 * var(--tilt-strength)))
    translateZ(calc(var(--bend-intensity) * 30px + var(--card-energy) * 10px))
    scale(calc(1 + var(--card-energy) * 0.05));
  
  filter: brightness(1.2) contrast(1.1) saturate(1.2);
  
  box-shadow: 
    0 40px 80px rgba(0, 0, 0, 0.6),
    0 16px 32px rgba(0, 0, 0, 0.4),
    inset 0 2px 4px rgba(255, 255, 255, 0.2),
    inset 0 -2px 2px rgba(0, 0, 0, 0.15),
    0 0 0 2px rgba(0, 255, 255, 0.6),
    0 0 60px rgba(0, 255, 255, 0.4),
    0 0 120px rgba(255, 0, 255, 0.2);
}

/* Edge-stretch morphing for portfolio items */
.portfolio-item:hover {
  --tilt-strength: 1.2;
  
  transform: 
    perspective(600px)
    rotateY(calc(15deg + (var(--mouse-x) - 50) * 0.2deg))
    rotateX(calc((var(--mouse-y) - 50) * -0.15deg))
    scaleX(calc(1 + abs(var(--mouse-x) - 50) * 0.008))
    scaleY(calc(1 + abs(var(--mouse-y) - 50) * 0.006))
    skewX(calc((var(--mouse-x) - 50) * 0.3deg))
    skewY(calc((var(--mouse-y) - 50) * 0.2deg))
    translateZ(calc(var(--bend-intensity) * 40px));
  
  box-shadow: 
    0 30px 60px rgba(255, 0, 255, 0.3),
    0 12px 24px rgba(255, 0, 255, 0.2),
    inset 0 2px 4px rgba(255, 255, 255, 0.15),
    0 0 0 2px rgba(255, 0, 255, 0.5),
    0 0 40px rgba(255, 0, 255, 0.3),
    0 0 80px rgba(0, 255, 255, 0.2);
}

/* Screen-tear dramatic effect for tech cards */
.tech-card:hover {
  --tilt-strength: 2.0;
  
  transform: 
    perspective(400px)
    rotateY(calc(35deg + (var(--mouse-x) - 50) * 0.4deg))
    rotateX(calc((var(--mouse-y) - 50) * -0.6deg))
    rotateZ(calc((var(--mouse-x) - 50) * 0.2deg))
    scaleX(calc(1.05 + abs(var(--mouse-x) - 50) * 0.01))
    scaleY(calc(0.95 + abs(var(--mouse-y) - 50) * 0.008))
    skewX(calc((var(--mouse-x) - 50) * 0.6deg))
    skewY(calc((var(--mouse-y) - 50) * 0.4deg))
    translateZ(calc(var(--bend-intensity) * 80px))
    translateX(calc((var(--mouse-x) - 50) * 0.8px))
    translateY(calc((var(--mouse-y) - 50) * 0.5px));
  
  filter: contrast(1.2) brightness(1.2) saturate(1.3);
  box-shadow: 
    0 60px 120px rgba(0, 255, 255, 0.4),
    0 20px 40px rgba(0, 255, 255, 0.3),
    inset 0 3px 6px rgba(255, 255, 255, 0.2),
    0 0 0 3px rgba(0, 255, 255, 0.7),
    0 0 80px rgba(0, 255, 255, 0.5),
    0 0 160px rgba(255, 255, 0, 0.3);
  z-index: 100;
}

/* Paper card gentle sway */
.paper-card:hover {
  --tilt-strength: 0.8;
  
  transform: 
    perspective(1000px)
    rotateY(calc(10deg * var(--bend-intensity)))
    rotateX(calc(3deg * (var(--mouse-y) - 50) / 50))
    translateZ(calc(var(--bend-intensity) * 15px))
    scale(calc(1 + var(--card-energy) * 0.02));
  
  box-shadow: 
    0 25px 50px rgba(255, 255, 0, 0.2),
    0 10px 20px rgba(255, 255, 0, 0.15),
    inset 0 1px 2px rgba(255, 255, 255, 0.1),
    0 0 0 1px rgba(255, 255, 0, 0.4),
    0 0 30px rgba(255, 255, 0, 0.3);
}

/* ===== CARD ACTIVATION STATES ===== */

/* Visualizer active state */
.tech-card.visualizer-active, .portfolio-item.visualizer-active, .paper-card.visualizer-active {
  --card-energy: 0.7;
  border: 1px solid rgba(0, 255, 255, 0.5);
  
  &::before {
    content: '';
    position: absolute;
    top: -2px; left: -2px; right: -2px; bottom: -2px;
    background: linear-gradient(45deg, 
      transparent 25%, 
      rgba(0, 255, 255, 0.1) 50%, 
      transparent 75%);
    border-radius: inherit;
    z-index: -1;
    animation: activation-pulse 2s ease-in-out infinite;
  }
}

@keyframes activation-pulse {
  0%, 100% { 
    opacity: 0.3; 
    transform: scale(1); 
  }
  50% { 
    opacity: 0.7; 
    transform: scale(1.02); 
  }
}

/* Explosive click state */
.tech-card.exploding, .portfolio-item.exploding, .paper-card.exploding {
  animation: card-explosion 0.3s cubic-bezier(0.68, -0.55, 0.265, 1.55);
  
  &::after {
    content: '';
    position: absolute;
    top: 50%; left: 50%;
    width: 100%; height: 100%;
    background: radial-gradient(circle, 
      rgba(0, 255, 255, 0.8) 0%, 
      rgba(255, 0, 255, 0.4) 50%, 
      transparent 100%);
    border-radius: 50%;
    transform: translate(-50%, -50%) scale(0);
    animation: explosion-ripple 0.6s ease-out;
    pointer-events: none;
    z-index: 100;
  }
}

@keyframes card-explosion {
  0% { transform: scale(1) rotate(0deg); }
  50% { transform: scale(1.1) rotate(2deg); }
  100% { transform: scale(1) rotate(0deg); }
}

@keyframes explosion-ripple {
  0% { transform: translate(-50%, -50%) scale(0); opacity: 0.8; }
  100% { transform: translate(-50%, -50%) scale(3); opacity: 0; }
}

/* ===== CARD VISUALIZER CONTAINERS ===== */

.card-visualizer {
  position: absolute;
  top: 0; left: 0;
  width: 100%; height: 100%;
  border-radius: inherit;
  overflow: hidden;
  pointer-events: none;
  opacity: 0.8;
  transition: opacity 0.4s ease;
}

/* Role-specific visualizer styling */
.shadow-visualizer {
  opacity: 0.6;
  filter: blur(2px) brightness(0.7);
  mix-blend-mode: multiply;
  transform: translate(4px, 4px);
  z-index: 3;
}

.content-visualizer {
  opacity: 0.8;
  mix-blend-mode: normal;
  z-index: 5;
}

.highlight-visualizer {
  opacity: 0.4;
  filter: blur(1px) brightness(1.5);
  mix-blend-mode: screen;
  transform: translate(-2px, -2px);
  z-index: 7;
}

.accent-visualizer {
  opacity: 0.3;
  filter: blur(3px);
  mix-blend-mode: color-dodge;
  transform: scale(1.02);
  z-index: 15;
}

/* ===== CARD CONTENT STYLING ===== */

.card-content {
  position: relative;
  z-index: 10;
  height: 100%;
  display: flex;
  flex-direction: column;
  padding: var(--space-6);
  
  /* Subtle gradient for content background */
  background: linear-gradient(135deg,
    rgba(0, 255, 255, 0.05) 0%,
    rgba(255, 0, 255, 0.03) 50%,
    rgba(255, 255, 0, 0.05) 100%
  );
}

.card-content h3 {
  position: relative;
  z-index: 12;
  margin-bottom: var(--space-3);
  text-shadow: 
    0 0 10px rgba(0, 255, 255, 0.5),
    0 2px 4px rgba(0, 0, 0, 0.8);
  transition: text-shadow 0.3s ease;
}

.card-content p {
  position: relative;
  z-index: 12;
  color: var(--text-secondary);
  line-height: var(--line-height-relaxed);
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.6);
}

/* Enhanced hover states for card content */
.tech-card:hover .card-content h3,
.portfolio-item:hover .card-content h3,
.paper-card:hover .card-content h3 {
  text-shadow: 
    0 0 20px rgba(0, 255, 255, 0.8),
    0 0 40px rgba(255, 0, 255, 0.4),
    0 2px 4px rgba(0, 0, 0, 0.8);
}

/* ===== CARD DEPTH LAYER SYSTEM ===== */

/* Background depth layer */
.card-depth-background {
  position: absolute;
  top: 0; left: 0; right: 0; bottom: 0;
  z-index: 1;
  transform: translateZ(-10px);
  background: radial-gradient(ellipse at center,
    rgba(0, 255, 255, 0.1) 0%,
    rgba(255, 0, 255, 0.05) 50%,
    transparent 100%);
  border-radius: inherit;
  opacity: 0.6;
}

/* Shadow depth layer */
.card-depth-shadow {
  position: absolute;
  top: 2px; left: 2px; right: -2px; bottom: -2px;
  z-index: 2;
  transform: translateZ(-5px);
  background: rgba(0, 0, 0, 0.2);
  border-radius: inherit;
  filter: blur(4px);
  opacity: 0.8;
}

/* Highlight depth layer */
.card-depth-highlight {
  position: absolute;
  top: -1px; left: -1px; right: 1px; bottom: 1px;
  z-index: 8;
  transform: translateZ(5px);
  background: linear-gradient(135deg,
    rgba(255, 255, 255, 0.1) 0%,
    transparent 50%,
    rgba(0, 255, 255, 0.05) 100%);
  border-radius: inherit;
  pointer-events: none;
  opacity: 0.5;
}

/* Accent rim layer */
.card-depth-accent {
  position: absolute;
  top: -2px; left: -2px; right: 2px; bottom: 2px;
  z-index: 16;
  transform: translateZ(10px);
  background: linear-gradient(45deg,
    var(--holo-rim-1) 0%,
    var(--holo-rim-2) 33%,
    var(--holo-rim-3) 66%,
    var(--holo-rim-1) 100%);
  border-radius: calc(inherit + 2px);
  opacity: 0;
  transition: opacity 0.4s ease;
  pointer-events: none;
  
  /* Animated gradient rotation */
  background-size: 200% 200%;
  animation: rim-rotation 4s linear infinite;
}

.tech-card:hover .card-depth-accent,
.portfolio-item:hover .card-depth-accent,
.paper-card:hover .card-depth-accent {
  opacity: 0.6;
}

@keyframes rim-rotation {
  0% { background-position: 0% 50%; }
  50% { background-position: 100% 50%; }
  100% { background-position: 0% 50%; }
}

/* ===== RESPONSIVE CARD BEHAVIOR ===== */

@media (max-width: 768px) {
  .tech-card, .portfolio-item, .paper-card {
    /* Reduce tilt intensity on mobile */
    --tilt-strength: 0.5;
    
    &:hover {
      transform: 
        perspective(1000px)
        rotateY(calc(10deg * var(--bend-intensity)))
        rotateX(calc(2deg * (var(--mouse-y) - 50) / 50))
        translateZ(calc(var(--bend-intensity) * 15px))
        scale(1.02);
    }
  }
}

@media (max-width: 480px) {
  .tech-card, .portfolio-item, .paper-card {
    /* Minimal effects on small screens */
    --tilt-strength: 0.3;
    
    &:hover {
      transform: 
        translateY(-5px)
        scale(1.02);
      
      /* Simplified shadows */
      box-shadow: 
        0 15px 30px rgba(0, 0, 0, 0.4),
        0 0 20px var(--neo-glow);
    }
  }
}

/* ===== PERFORMANCE OPTIMIZATIONS ===== */

.tech-card, .portfolio-item, .paper-card {
  will-change: transform, filter, box-shadow;
  transform: translateZ(0); /* Force GPU layer */
  backface-visibility: hidden;
}

/* Reduce motion for accessibility */
@media (prefers-reduced-motion: reduce) {
  .tech-card, .portfolio-item, .paper-card {
    transition-duration: 0.1s !important;
    
    &:hover {
      transform: translateY(-2px) scale(1.01) !important;
    }
    
    .card-depth-accent {
      animation: none !important;
    }
  }
}